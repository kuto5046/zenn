---
title: "Kaggle ARC Prize 2025 1位解法から学ぶ  合成データ生成"
emoji: "🦔"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["kaggle", "ARC", "LLM"]
published: false
---

## はじめに
この記事はKaggle Advent Calendar 2025の12日目の記事です。
本記事ではKaggleで2025年の5月から11月にかけて開催されたARC Prize 2025に関する話題です。
https://www.kaggle.com/competitions/arc-prize-2025

私自身、このコンペが残り2ヶ月となった頃に興味を持って少し触っていたのですが、あまり時間を取ることができず提出するまでには至りませんでした。
そこで理解を深めるために上位解法に目を通したところ、1位のスコアは飛び抜けて高く、その解法で行われている合成データ生成部分が非常にユニークで、スコアにも大きく寄与している重要な要素だと感じました。そのため今回は網羅的な解法紹介ではなく、この1点に絞って記事にまとめようと思います。

## 問題設定
解法の紹介に入る前にまずは問題設定について紹介します。

### タスク
ARC-AGIは汎用人工知能開発のためのベンチマークです。下記のような画像の入出力ペアを見てパターン認識を行い、新たな入力に対して出力を生成するタスクとなっています。このようなパズルを人間は簡単に解けますが、LLMには難しいタスクとして知られています。このタスクを解くためにどういう推論が必要か読者のみなさんもぜひ考えてみてください。
![](/images/kaggle-arc2025/example1.png)

ちなみに人間だと正答率100%という謳い文句で紹介されているベンチマークですが、普通に難しいものが多いです。下記リンクから他のタスクをwebブラウザ上で試すこともできます。
https://arcprize.org/arc-agi/2/


今回紹介するARC Prize 2025は昨年kaggleで開催されたARC Prize 2024の続編として開催されました。問題設定は同じですが、本コンペでは新たにARC-AGI-2というアップデートされたベンチマークを利用しています。ARC Prize 2025が公開された当時トップレベルの性能を持つOpenAI o3ですら5%程度のスコアしか得られていません。このように昨年度からより難易度が上がっているのがARC Prize 2025の特徴です。
![](/images/kaggle-arc2025/arc-agi2.png)

### データセット
ARC-AGI2の公開データセットとして1120件のタスクが正解データ付きで提供されています。
1つのタスクにはtrainとtestと呼ばれる入出力の画像ペアが存在します。trainとは、そのタスクの解き方の例を示すものです。

例えば下記のTask0の場合、Trainとして2つの入出力例が提供されています。これらを見比べることで「input画像を3×3の行列に拡張したものがoutputになる」というパターンを推論し、testのinputに対して同様の変換を適用してoutputを生成することが解法となります。なおデータ形式は10個の色に対応する1桁の整数値(0~9)で構成される行列で表現されます。

![](/images/kaggle-arc2025/arc_task0.png)
このように回答者はtrainとして提供されている事例をもとに何らかのパターン認識を行った上でtestのデータに対して推論に沿うアウトプットを生成する必要があります。上記は比較的簡単な例ですがタスクによっては下記のように非常に複雑なパターン認識が必要となる場合もあります。
![](/images/kaggle-arc2025/task0.png)
*inputが複雑かつoutputの形状がバラバラ*

![](/images/kaggle-arc2025/task22.png)
*パターンは分かるが抽象化の粒度が難しい*

なおARC-AGI2データセットの公開タスクを全て可視化したものが下記notebookで紹介されています。
https://www.kaggle.com/code/allegich/arc-agi-2025-visualization-all-1000-120-tasks#2.-VISUALIZATION-EVALUATION-SET


### 評価指標
本コンペでは各タスクに対して、2回の予測を行いその正答率で評価されます。スコアリングの仕組みは以下の通りです。
- 各テスト出力に対して2つの予測（attempt_1, attempt_2）のうち、いずれか一方が正解と完全一致すれば1点
- 完全一致しなければ0点
- 最終スコアは全タスクテスト出力の平均スコア

## 1位解法の概要
1位解法の重要な点として3つの要素が挙げられています。
- マルチステージの合成データ生成
- ARC Prize 2024の1位解法の改善
- Tiny Recursive Modelの改善

中でも独自に作成した合成データによる昨年度1位解法モデルのfine tuningしたことによりスコアを伸ばしていることがdiscussionから伺えます。
https://www.kaggle.com/competitions/arc-prize-2025/writeups/nvarc

本記事で紹介するのは1つ目の合成データ生成部分であるため、その他の2つについては簡単に触れるに留めます。



なお本記事の主題とはズレるため詳細は割愛しますがTiny Recursive Model(TRM)は2025年10月(コンペ終了の1ヶ月前)に発表されたLLMで、パラメータ数が
https://arxiv.org/abs/2510.04871

## 合成データ生成

- 人工データ生成
  - HARCというパズルタスクの説明文を人が書いたものを用意
  - 26万件のパズルの要約を作成 
  - 入出力ペアを同時生成するのではなく、入力画像をまず生成する
  - summaryで入出力例とユーザコメントをもとにそのタスクの要約、入力生成方法、解法、洞察、パズルコンセプトを生成
  - 入力grid生成
    - パズルの説明を元に入力グリッド生成コードを生成する
    - パズルの説明をもとにまずは分析をさせて計画を立てさせる
    - seedを変えれる様にしている
  - 出力grid生成
    - パズルの説明と入力グリッド生成コードを元に出力グリッド生成コードを生成する

## おわりに
