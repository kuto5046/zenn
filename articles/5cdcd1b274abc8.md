---
title: "Nano Banana Proで解法を図解する"
emoji: "🍌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["kaggle"]
published: false
---

## はじめに
先日開催された関西Kaggler会にて以下のように解法を図解する技術について発表しました。
https://www.docswell.com/s/kuto1963222/ZX6772-2025-11-14-170808#p1
![](/images/5cdcd1b274abc8/slide.png)

この発表をした1週間後にNano Banana Proという画像生成AIがGoogleから発表されました。
その性能は非常に高く、以下の記事でさまざまな生成事例が紹介されています。
https://note.com/google_gemini/n/n064d03afe2c0

今まで人力でやっていた解法の図解ですが、いよいよAIでできるのでは？という期待が自分の中で高まったので、この記事ではNano Banana Proを用いて、解法の図解を試してみたのでその結果と感想を共有します。

## 実験条件
現在私はAIMO3というコンペに参加しているので、その過去コンペであるAIMO2の1位解法を図解の題材として利用したいと思います。
解法内には画像も含まれているのですが、今回はテキスト部分のみを利用して図解を生成することにします。
https://www.kaggle.com/competitions/ai-mathematical-olympiad-progress-prize-2/writeups/nemoskills-1st-place-solution-nemoskills

今回は以下の方法で画像生成を試すことにします。
- 解法のみ
- 解法+過去の図解画像
- 解法+指示テキスト

生成される解法画像は実行のたびに異なる結果となるため、複数回生成したものを貼っています。見比べるとブレや傾向がわかるかと思います.

## 結果
### 1.解法のみ
まずは、生成画像のベースラインを確認するために、解法テキストのみを入力として生成を試してみます。

:::details プロンプト
```markdown
下記のテキストはkaggleで開催されていた`AI Mathematical Olympiad - Progress Prize 2`の1位解法です。
この解法を図解した画像を作成してください。

---
<解法テキスト>
---
```
:::

#### 生成結果
![](/images/5cdcd1b274abc8/sample7.png)
![](/images/5cdcd1b274abc8/sample5.png)
![](/images/5cdcd1b274abc8/sample6.png)

特に指示を与えなくてもそれなりにいい感じの図解画像が生成されました。生成結果を見ると特徴として以下のような点がありそうです。
- アイコンを適切に利用している
- 色の統一感がある
- Data, Training, Inferenceの3部構成


### 2.解法+過去の図解画像
今度は解法に加えて、過去に私が作成した他コンペの図解画像を入力に事例として追加し生成してみます。これにより、生成される画像のフォーマットを過去の図解画像に寄ることを期待しています。

:::details プロンプト
```markdown
下記のテキストはkaggleで開催されていた`AI Mathematical Olympiad - Progress Prize 2`の1位解法です。
この解法を元に添付画像のフォーマットに従って、図解した画像を作成してください。

---
<解法テキスト>
---

<過去の図解画像を複数添付>
```
:::

:::details 添付画像
![](/images/5cdcd1b274abc8/eedi.png)
![](/images/5cdcd1b274abc8/handm.png)
![](/images/5cdcd1b274abc8/luxais3.png)
:::

#### 生成結果
![](/images/5cdcd1b274abc8/sample2.png)
![](/images/5cdcd1b274abc8/sample1.png)
![](/images/5cdcd1b274abc8/sample3.png)
<!-- ![](/images/5cdcd1b274abc8/sample4.png) -->

図解の雰囲気が変わり、過去の図解画像に近づいていることがわかります。特にレイアウト、カラーリング、ブロックを使ったグルーピング、文章量の増加が変化しており、個人的にはこちらの方が好みです。
一方、過去画像には含まれているが、今回のプロンプトでは与えていない情報(順位、コンペ名、チーム名など)によってハルシネーションが発生している部分も見受けられます。

### 3.解法+指示テキスト
2つ目のアプローチで、過去の図解画像を入力に追加することで、暗黙的にフォーマットを提示し好みの見た目に近づけることができましたが、もっと細かく明示的に指示を与えることで完成度を高めることはできないだろうかと考えました。そこで、過去の図解画像の代わりに指示テキストをプロンプトに追加して生成を試してみます。プロンプトは、過去の図解画像を説明させるようにgeminiに依頼し、それをベースに何回か画像生成を試しながら調整しました。

:::details プロンプト
```markdown
```
:::

#### 生成結果